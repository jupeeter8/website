---
import '../styles/newspaper.css'
import { getCollection } from "astro:content";
const allPosts =  (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
const size = allPosts.length;
const currPost = allPosts[0];
const prevPost = allPosts[1];
const today = new Date();
const formattedDate = today.toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
});
---
<section class="newspaper head">
    <div class="ns-header">THE BLOG</div>
        <div class="ns-subhead">
            <p>{formattedDate.toUpperCase()}, {size} Pages</p>
        </div>
        <div class="content">

            <section class="collumns left">
                <div class="supp-content">
                    <p>In a stunning turn of events, chronically online Anirudh has come out from underneath his rock, to touch some grass. "I can't believe it!" says a friend.
                    </p>
                </div>
            </section>

            <section class="collumns">
                <div class="ns-main-body">
                    <a href={`/blog/${currPost.id}`} id="ns-entry-link">
                    <h3 id="ns-entry-title">{currPost.data.title}</h3>
                    <p id="ns-entry-content">{currPost.data.summary}</p>
                    
                    <div><img src={`${currPost.data.image.url}`} alt={`${currPost.data.image.alt}`}></div>
                    </a>
                </div>
            </section>
            <section class="collumns right">
                <!-- <div class="supp-content">
                    <p>Want this in your terminal? Run <code><mark>curl news.whereisanirudh.info</mark></code></p>
                </div> -->
                <div class="supp-content">
                    <h4>In other news</h4>
                    <a href={`/blog/${prevPost.id}`}>
                    <p><strong>{prevPost.data.title}</strong></p>
                    <p>{prevPost.data.summary}</p>
                    </a>
                </div>
            </section>
        </div>
        <div class="ns-footer">
            <p>Want this in your terminal? Run <code>curl news.whereisanirudh.info</code></p>
        </div>
</section>